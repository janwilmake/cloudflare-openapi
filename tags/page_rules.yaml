openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /zones/{zone_id}/pagerules:
    get:
      description: Fetches Page Rules in a zone.
      operationId: page-rules-list-page-rules
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
        - in: query
          name: order
          schema:
            default: priority
            description: The field used to sort returned Page Rules.
            enum:
              - status
              - priority
            example: status
            type: string
        - in: query
          name: direction
          schema:
            default: desc
            description: The direction used to sort returned Page Rules.
            enum:
              - asc
              - desc
            example: desc
            type: string
        - in: query
          name: match
          schema:
            default: all
            description: >-
              When set to `all`, all the search requirements must match. When
              set to `any`, only one of the search requirements has to match.
            enum:
              - any
              - all
            type: string
        - in: query
          name: status
          schema:
            default: disabled
            description: The status of the Page Rule.
            enum:
              - active
              - disabled
            example: active
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/zones_schemas-api-response-common'
                  - properties:
                      result:
                        items:
                          $ref: '#/components/schemas/zones_page_rule'
                        type: array
          description: List Page Rules response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: List Page Rules response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: List Page Rules
      tags:
        - Page Rules
      x-api-token-group:
        - Zone Read
        - Zone Write
        - Page Rules Write
        - Page Rules Read
    post:
      description: Creates a new Page Rule.
      operationId: page-rules-create-a-page-rule
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                actions:
                  $ref: '#/components/schemas/zones_actions'
                priority:
                  $ref: '#/components/schemas/zones_priority'
                status:
                  $ref: '#/components/schemas/zones_status'
                targets:
                  $ref: '#/components/schemas/zones_targets'
              required:
                - targets
                - actions
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/zones_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/zones_page_rule'
          description: Create a Page Rule response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: Create a Page Rule response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Create a Page Rule
      tags:
        - Page Rules
      x-api-token-group:
        - Zone Write
        - Page Rules Write
  /zones/{zone_id}/pagerules/{pagerule_id}:
    get:
      description: Fetches the details of a Page Rule.
      operationId: page-rules-get-a-page-rule
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: pagerule_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/zones_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/zones_page_rule'
          description: Get a Page Rule response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: Get a Page Rule response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Get a Page Rule
      tags:
        - Page Rules
      x-api-token-group:
        - Trust and Safety Write
        - Trust and Safety Read
        - 'Zero Trust: PII Read'
        - Zaraz Edit
        - Zaraz Read
        - Zaraz Admin
        - 'Access: Apps and Policies Revoke'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
        - 'Access: Apps and Policies Revoke'
        - 'Access: Mutual TLS Certificates Write'
        - 'Access: Organizations, Identity Providers, and Groups Write'
        - Zone Settings Write
        - Zone Settings Read
        - Zone Read
        - DNS Read
        - Workers Scripts Write
        - Workers Scripts Read
        - Zone Write
        - Workers Routes Write
        - Workers Routes Read
        - Stream Write
        - Stream Read
        - SSL and Certificates Write
        - SSL and Certificates Read
        - Logs Write
        - Logs Read
        - Cache Purge
        - Page Rules Write
        - Page Rules Read
        - Load Balancers Write
        - Load Balancers Read
        - Firewall Services Write
        - Firewall Services Read
        - DNS Write
        - Apps Write
        - Analytics Read
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
    put:
      description: >-
        Replaces the configuration of an existing Page Rule. The configuration
        of the updated Page Rule will exactly match the data passed in the API
        request.
      operationId: page-rules-update-a-page-rule
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: pagerule_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                actions:
                  $ref: '#/components/schemas/zones_actions'
                priority:
                  $ref: '#/components/schemas/zones_priority'
                status:
                  $ref: '#/components/schemas/zones_status'
                targets:
                  $ref: '#/components/schemas/zones_targets'
              required:
                - targets
                - actions
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/zones_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/zones_page_rule'
          description: Update a Page Rule response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: Update a Page Rule response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Update a Page Rule
      tags:
        - Page Rules
      x-api-token-group:
        - Zone Write
        - Page Rules Write
    patch:
      description: Updates one or more fields of an existing Page Rule.
      operationId: page-rules-edit-a-page-rule
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: pagerule_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                actions:
                  $ref: '#/components/schemas/zones_actions'
                priority:
                  $ref: '#/components/schemas/zones_priority'
                status:
                  $ref: '#/components/schemas/zones_status'
                targets:
                  $ref: '#/components/schemas/zones_targets'
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/zones_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/zones_page_rule'
          description: Edit a Page Rule response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: Edit a Page Rule response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Edit a Page Rule
      tags:
        - Page Rules
      x-api-token-group:
        - Zone Write
        - Page Rules Write
    delete:
      description: Deletes an existing Page Rule.
      operationId: page-rules-delete-a-page-rule
      parameters:
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: pagerule_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
        - example: 023e105f4ecef8ad9ca31a8372d0c353
          in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/zones_schemas-identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-single-id'
          description: Delete a Page Rule response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/zones_schemas-api-response-common-failure'
          description: Delete a Page Rule response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Delete a Page Rule
      tags:
        - Page Rules
      x-api-token-group:
        - Zone Write
        - Page Rules Write
components:
  schemas:
    zones_actions:
      description: |
        The set of actions to perform if the targets of this rule match the
        request. Actions can redirect to another URL or override settings, but
        not both.
      example:
        - id: browser_check
          value: 'on'
      items:
        discriminator:
          propertyName: id
        oneOf:
          - $ref: '#/components/schemas/zones_always_use_https'
          - $ref: '#/components/schemas/zones_automatic_https_rewrites'
          - $ref: '#/components/schemas/zones_browser_cache_ttl'
          - $ref: '#/components/schemas/zones_browser_check'
          - $ref: '#/components/schemas/zones_bypass_cache_on_cookie'
          - $ref: '#/components/schemas/zones_cache_by_device_type'
          - $ref: '#/components/schemas/zones_cache_deception_armor'
          - $ref: '#/components/schemas/zones_cache_key_fields'
          - $ref: '#/components/schemas/zones_cache_level'
          - $ref: '#/components/schemas/zones_cache_on_cookie'
          - $ref: '#/components/schemas/zones_cache_ttl_by_status'
          - $ref: '#/components/schemas/zones_disable_apps'
          - $ref: '#/components/schemas/zones_disable_performance'
          - $ref: '#/components/schemas/zones_disable_security'
          - $ref: '#/components/schemas/zones_disable_zaraz'
          - $ref: '#/components/schemas/zones_edge_cache_ttl'
          - $ref: '#/components/schemas/zones_email_obfuscation'
          - $ref: '#/components/schemas/zones_explicit_cache_control'
          - $ref: '#/components/schemas/zones_forwarding_url'
          - $ref: '#/components/schemas/zones_host_header_override'
          - $ref: '#/components/schemas/zones_ip_geolocation'
          - $ref: '#/components/schemas/zones_mirage'
          - $ref: '#/components/schemas/zones_opportunistic_encryption'
          - $ref: '#/components/schemas/zones_origin_error_page_pass_thru'
          - $ref: '#/components/schemas/zones_polish'
          - $ref: '#/components/schemas/zones_resolve_override'
          - $ref: '#/components/schemas/zones_respect_strong_etag'
          - $ref: '#/components/schemas/zones_response_buffering'
          - $ref: '#/components/schemas/zones_rocket_loader'
          - $ref: '#/components/schemas/zones_security_level'
          - $ref: '#/components/schemas/zones_sort_query_string_for_cache'
          - $ref: '#/components/schemas/zones_ssl'
          - $ref: '#/components/schemas/zones_true_client_ip_header'
          - $ref: '#/components/schemas/zones_waf'
      type: array
      x-stainless-skip:
        - terraform
    zones_api-response-single:
      allOf:
        - $ref: '#/components/schemas/zones_schemas-api-response-common'
      type: object
    zones_page_rule:
      properties:
        actions:
          $ref: '#/components/schemas/zones_actions'
        created_on:
          $ref: '#/components/schemas/zones_created_on'
        id:
          $ref: '#/components/schemas/zones_schemas-identifier'
        modified_on:
          $ref: '#/components/schemas/zones_modified_on'
        priority:
          $ref: '#/components/schemas/zones_priority'
        status:
          $ref: '#/components/schemas/zones_status'
        targets:
          $ref: '#/components/schemas/zones_targets'
      required:
        - id
        - targets
        - actions
        - priority
        - status
        - modified_on
        - created_on
      type: object
    zones_priority:
      default: 1
      description: |
        The priority of the rule, used to define which Page Rule is processed
        over another. A higher number indicates a higher priority. For example,
        if you have a catch-all Page Rule (rule A: `/images/*`) but want a more
        specific Page Rule to take precedence (rule B: `/images/special/*`),
        specify a higher priority for rule B so it overrides rule A.
      type: integer
      x-auditable: true
    zones_schemas-api-response-common:
      properties:
        errors:
          $ref: '#/components/schemas/zones_schemas-messages'
        messages:
          $ref: '#/components/schemas/zones_schemas-messages'
        success:
          description: Whether the API call was successful.
          enum:
            - true
          example: true
          type: boolean
      required:
        - success
        - errors
        - messages
      type: object
    zones_schemas-api-response-common-failure:
      properties:
        errors:
          allOf:
            - $ref: '#/components/schemas/zones_schemas-messages'
          example:
            - code: 7003
              message: No route for the URI
          minLength: 1
        messages:
          allOf:
            - $ref: '#/components/schemas/zones_schemas-messages'
          example: []
        result:
          enum:
            - null
          nullable: true
          type: object
        success:
          description: Whether the API call was successful.
          enum:
            - false
          example: false
          type: boolean
      required:
        - success
        - errors
        - messages
        - result
      type: object
    zones_schemas-api-response-single-id:
      allOf:
        - $ref: '#/components/schemas/zones_schemas-api-response-common'
        - properties:
            result:
              nullable: true
              properties:
                id:
                  $ref: '#/components/schemas/zones_schemas-identifier'
              required:
                - id
              type: object
      type: object
    zones_schemas-identifier:
      description: Identifier.
      example: 023e105f4ecef8ad9ca31a8372d0c353
      maxLength: 32
      type: string
      x-auditable: true
    zones_status:
      default: disabled
      description: The status of the Page Rule.
      enum:
        - active
        - disabled
      example: active
      type: string
      x-auditable: true
    zones_targets:
      description: The rule targets to evaluate on each request.
      example:
        - constraint:
            operator: matches
            value: '*example.com/images/*'
          target: url
      items:
        $ref: '#/components/schemas/zones_target'
      type: array
      x-stainless-skip:
        - terraform
