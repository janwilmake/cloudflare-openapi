openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /zones/{zone_id}/access/apps:
    get:
      description: List all Access Applications in a zone.
      operationId: zone-level-access-applications-list-access-applications
      parameters:
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/access_apps_components-schemas-response_collection-2
          description: List Access Applications response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: List Access Applications response failure
      security:
        - api_email: []
          api_key: []
      summary: List Access Applications
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Revoke'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
        - 'Access: Apps and Policies Revoke'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
    post:
      description: Adds a new application to Access.
      operationId: zone-level-access-applications-add-a-bookmark-application
      parameters:
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/access_apps'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: >-
                      #/components/schemas/access_apps_components-schemas-single_response-2
                  - properties:
                      result:
                        $ref: '#/components/schemas/access_apps'
          description: Add an Access application response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Add an Access application response failure
      security:
        - api_email: []
          api_key: []
      summary: Add an Access application
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Write'
  /zones/{zone_id}/access/apps/{app_id}:
    get:
      description: Fetches information about an Access application.
      operationId: zone-level-access-applications-get-an-access-application
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/access_apps_components-schemas-single_response-2
          description: Get an Access application response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Get an Access application response failure
      security:
        - api_email: []
          api_key: []
      summary: Get an Access application
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
    put:
      description: Updates an Access application.
      operationId: zone-level-access-applications-update-a-bookmark-application
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/access_apps'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: >-
                      #/components/schemas/access_apps_components-schemas-single_response-2
                  - properties:
                      result:
                        $ref: '#/components/schemas/access_apps'
          description: Update an Access application response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Update an Access application response failure
      security:
        - api_email: []
          api_key: []
      summary: Update an Access application
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Write'
    delete:
      description: Deletes an application from Access.
      operationId: zone-level-access-applications-delete-an-access-application
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_id_response'
          description: Delete an Access application response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Delete an Access application response failure
      security:
        - api_email: []
          api_key: []
      summary: Delete an Access application
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Write'
  /zones/{zone_id}/access/apps/{app_id}/revoke_tokens:
    post:
      description: Revokes all tokens issued for an application.
      operationId: zone-level-access-applications-revoke-service-tokens
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_schemas-empty_response'
          description: Revoke application tokens response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Revoke application tokens response failure
      security:
        - api_email: []
          api_key: []
      summary: Revoke application tokens
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Revoke'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Revoke'
        - 'Access: Apps and Policies Write'
  /zones/{zone_id}/access/apps/{app_id}/settings:
    put:
      description: Updates application settings.
      operationId: zone-level-access-applications-put-update-access-application-settings
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/access_app_settings_request'
        required: true
      responses:
        '202':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/access_single_response_update'
          description: Update application settings response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Update application settings response failure
      security:
        - api_email: []
          api_key: []
      summary: Update application settings
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Write'
    patch:
      description: Updates application settings.
      operationId: zone-level-access-applications-patch-update-access-application-settings
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/access_app_settings_request'
        required: true
      responses:
        '202':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/access_single_response_update'
          description: Update application settings response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Update application settings response failure
      security:
        - api_email: []
          api_key: []
      summary: Update application settings
      tags:
        - Zone-Level Access applications
  /zones/{zone_id}/access/apps/{app_id}/user_policy_checks:
    get:
      description: Tests if a specific user has permission to access an application.
      operationId: zone-level-access-applications-test-access-policies
      parameters:
        - in: path
          name: app_id
          required: true
          schema:
            $ref: '#/components/schemas/access_app_id'
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/access_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_schemas-policy_check_response'
          description: Test Access policies response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/access_api-response-common-failure'
          description: Test Access policies response failure
      security:
        - api_email: []
          api_key: []
      summary: Test Access policies
      tags:
        - Zone-Level Access applications
      x-api-token-group:
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
        - 'Access: Apps and Policies Write'
        - 'Access: Apps and Policies Read'
components:
  schemas:
    access_api-response-common-failure:
      properties:
        errors:
          allOf:
            - $ref: '#/components/schemas/access_messages'
          example:
            - code: 7003
              message: No route for the URI
          minLength: 1
        messages:
          allOf:
            - $ref: '#/components/schemas/access_messages'
          example: []
        result:
          enum:
            - null
          nullable: true
          type: object
        success:
          description: Whether the API call was successful.
          enum:
            - false
          example: false
          type: boolean
      required:
        - success
        - errors
        - messages
        - result
      type: object
    access_app_id:
      oneOf:
        - $ref: '#/components/schemas/access_identifier'
        - $ref: '#/components/schemas/access_uuid'
    access_app_settings_request:
      properties:
        allow_iframe:
          $ref: '#/components/schemas/access_allow_iframe'
        skip_interstitial:
          $ref: '#/components/schemas/access_skip_interstitial'
      type: object
    access_apps:
      anyOf:
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-self_hosted_props'
          title: Self Hosted Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-saas_props'
          title: SaaS Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-ssh_props'
          title: Browser SSH Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-vnc_props'
          title: Browser VNC Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-app_launcher_props'
          title: App Launcher Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-warp_props'
          title: Device Enrollment Permissions Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-biso_props'
          title: Browser Isolation Permissions Application
          type: object
        - allOf:
            - $ref: '#/components/schemas/access_schemas-basic_app_response_props'
            - $ref: '#/components/schemas/access_schemas-bookmark_props'
          title: Bookmark application
          type: object
      type: object
    access_apps_components-schemas-response_collection-2:
      allOf:
        - $ref: '#/components/schemas/access_api-response-collection'
        - properties:
            result:
              items:
                $ref: '#/components/schemas/access_apps'
              type: array
      type: object
    access_apps_components-schemas-single_response-2:
      allOf:
        - $ref: '#/components/schemas/access_api-response-single'
        - properties:
            result:
              $ref: '#/components/schemas/access_apps'
      type: object
    access_id_response:
      allOf:
        - $ref: '#/components/schemas/access_api-response-single'
        - properties:
            result:
              properties:
                id:
                  $ref: '#/components/schemas/access_uuid'
              type: object
      type: object
    access_identifier:
      description: Identifier.
      example: 023e105f4ecef8ad9ca31a8372d0c353
      maxLength: 32
      type: string
      x-auditable: true
    access_schemas-empty_response:
      allOf:
        - properties:
            result:
              nullable: true
              type: object
            success:
              enum:
                - true
                - false
              example: true
              type: boolean
      type: object
    access_schemas-policy_check_response:
      allOf:
        - $ref: '#/components/schemas/access_api-response-single'
        - properties:
            result:
              properties:
                app_state:
                  properties:
                    app_uid:
                      $ref: '#/components/schemas/access_uuid'
                    aud:
                      example: >-
                        737646a56ab1df6ec9bddc7e5ca84eaf3b0768850f3ffb5d74f1534911fe389
                      type: string
                    hostname:
                      example: test.com
                      type: string
                    name:
                      example: Test App
                      type: string
                    policies:
                      example:
                        - decision: allow
                          exclude: []
                          include:
                            - _type: email
                              email: testuser@gmail.com
                          precedence: 0
                          require: []
                          status: Success
                      items: {}
                      type: array
                    status:
                      example: Success
                      type: string
                  type: object
                user_identity:
                  properties:
                    account_id:
                      example: 41ecfbb341f033e52b46742756aabb8b
                      type: string
                    device_sessions:
                      example: {}
                      type: object
                    email:
                      example: testuser@gmail.com
                      type: string
                    geo:
                      properties:
                        country:
                          example: US
                          type: string
                      type: object
                    iat:
                      type: integer
                    id:
                      example: '1164449231815010287495'
                      type: string
                    is_gateway:
                      example: false
                      type: boolean
                    is_warp:
                      example: false
                      type: boolean
                    name:
                      example: Test User
                      type: string
                    user_uuid:
                      $ref: '#/components/schemas/access_uuid'
                    version:
                      type: integer
                  type: object
              type: object
      type: object
    access_single_response_update:
      allOf:
        - $ref: '#/components/schemas/access_api-response-single'
        - properties:
            result:
              $ref: '#/components/schemas/access_app_settings_response'
      type: object
