openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /accounts/{account_id}/iam/user_groups:
    get:
      description: List all the user groups for an account.
      operationId: account-user-group-list
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - description: ID of the user group to be fetched.
          in: query
          name: id
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
        - in: query
          name: name
          schema:
            description: Name of the user group to be fetched.
            example: NameOfTheUserGroup
            type: string
        - in: query
          name: fuzzyName
          schema:
            description: >-
              A string used for searching for user groups containing that
              substring.
            example: Foo
            type: string
        - in: query
          name: page
          schema:
            default: 1
            description: Page number of paginated results.
            minimum: 1
            type: number
        - in: query
          name: per_page
          schema:
            default: 20
            description: Maximum number of results per page.
            maximum: 50
            minimum: 5
            type: number
        - in: query
          name: direction
          schema:
            description: >-
              The sort order of returned user groups by name. Default sort order
              is ascending. To switch to descending, set this parameter to
              "desc"
            example: desc
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-collection'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_groups'
                    type: object
          description: List User Group response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: List User Group response failure
      security:
        - api_email: []
          api_key: []
        - api_email: []
          api_key: []
      summary: List User Groups
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
        - Account Settings Read
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.list
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
    post:
      description: Create a new user group under the specified account.
      operationId: account-user-group-create
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/iam_create_user_group_body'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_group'
                    type: object
          description: Add User Group response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Add User Group response failure
      security:
        - api_email: []
          api_key: []
      summary: Create User Group
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.create
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
  /accounts/{account_id}/iam/user_groups/{user_group_id}:
    get:
      description: Get information about a specific user group in an account.
      operationId: account-user-group-details
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_group'
                    type: object
          description: User Group Details response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: User Group Details response failure
      security:
        - api_email: []
          api_key: []
      summary: User Group Details
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
        - Account Settings Read
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.read
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
    put:
      description: Modify an existing user group.
      operationId: account-user-group-update
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/iam_update_user_group_body'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_group'
                    type: object
          description: Update User Group response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Update User Group response failure
      security:
        - api_email: []
          api_key: []
      summary: Update User Group
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.update
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
    delete:
      description: Remove a user group from an account.
      operationId: account-user-group-delete
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-single-id'
          description: Remove User Group response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Remove User Group response failure
      security:
        - api_email: []
          api_key: []
      summary: Remove User Group
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.delete
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
  /accounts/{account_id}/iam/user_groups/{user_group_id}/members:
    get:
      description: List all the members attached to a user group.
      operationId: account-user-group-member-list
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
        - in: query
          name: page
          schema:
            default: 1
            description: Page number of paginated results.
            minimum: 1
            type: number
        - in: query
          name: per_page
          schema:
            default: 100
            description: Maximum number of results per page.
            maximum: 500
            minimum: 1
            type: number
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-collection'
                  - properties:
                      result:
                        items:
                          $ref: '#/components/schemas/iam_user_group_member'
                        type: array
                    type: object
                title: List of members attached to a user group
          description: List User Group Members
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: User Group Details response failure
      security:
        - api_email: []
          api_key: []
      summary: List User Group Members
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
        - Account Settings Read
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.read
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
    post:
      description: Add members to a User Group.
      operationId: account-user-group-member-create
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
      requestBody:
        content:
          application/json:
            schema:
              items:
                properties:
                  id:
                    $ref: '#/components/schemas/iam_user_group_member_identifier'
                required:
                  - id
                type: object
              type: array
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_group_member'
                    type: object
          description: Add User Group Member response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Add User Group Member response failure
      security:
        - api_email: []
          api_key: []
      summary: Add User Group Members
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.create
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
    put:
      description: Replace the set of members attached to a User Group.
      operationId: account-user-group-members-update
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
      requestBody:
        content:
          application/json:
            schema:
              description: Set/Replace members to a user group.
              items:
                properties:
                  id:
                    $ref: '#/components/schemas/iam_user_group_member_identifier'
                required:
                  - id
                type: object
              title: Update User Group Members
              type: array
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        items:
                          $ref: '#/components/schemas/iam_user_group_member'
                        type: array
                    type: object
          description: Update User Group Members response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Update User Group response failure
      security:
        - api_email: []
          api_key: []
      summary: Update User Group Members
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
  /accounts/{account_id}/iam/user_groups/{user_group_id}/members/{member_id}:
    delete:
      description: Remove a member from User Group
      operationId: account-user-group-member-delete
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_account_identifier'
        - in: path
          name: user_group_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_identifier'
        - in: path
          name: member_id
          required: true
          schema:
            $ref: '#/components/schemas/iam_user_group_member_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/iam_api-response-single'
                  - properties:
                      result:
                        $ref: '#/components/schemas/iam_user_group_member'
                    type: object
          description: Delete User Group Member response
        4XX:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/iam_api-response-common-failure'
          description: Delete User Group response failure
      security:
        - api_email: []
          api_key: []
      summary: Remove User Group Member
      tags:
        - Account User Groups
      x-api-token-group:
        - SCIM Provisioning
        - Account Settings Write
      x-cfPermissionsRequired:
        enum:
          - com.cloudflare.api.account.member.delete
      x-cfPlanAvailability:
        business: true
        enterprise: true
        free: true
        pro: true
components:
  schemas:
    iam_account_identifier:
      allOf:
        - $ref: '#/components/schemas/iam_common_components-schemas-identifier'
      description: Account identifier tag.
      title: Account Identifier
    iam_api-response-collection:
      allOf:
        - $ref: '#/components/schemas/iam_api-response-common'
        - properties:
            result_info:
              $ref: '#/components/schemas/iam_result_info'
      type: object
    iam_api-response-common-failure:
      properties:
        errors:
          allOf:
            - $ref: '#/components/schemas/iam_schemas-messages'
          example:
            - code: 7003
              message: No route for the URI
          minLength: 1
        messages:
          allOf:
            - $ref: '#/components/schemas/iam_schemas-messages'
          example: []
        result:
          enum:
            - null
          nullable: true
          type: object
        success:
          description: Whether the API call was successful.
          enum:
            - false
          example: false
          type: boolean
      required:
        - success
        - errors
        - messages
        - result
      type: object
    iam_api-response-single:
      allOf:
        - $ref: '#/components/schemas/iam_api-response-common'
      type: object
    iam_api-response-single-id:
      allOf:
        - $ref: '#/components/schemas/iam_api-response-common'
        - properties:
            result:
              nullable: true
              properties:
                id:
                  $ref: >-
                    #/components/schemas/iam_common_components-schemas-identifier
              required:
                - id
              type: object
      type: object
    iam_create_user_group_body:
      properties:
        name:
          description: Name of the User group.
          example: My New User Group
          type: string
          x-auditable: true
        policies:
          description: Policies attached to the User group
          items:
            $ref: '#/components/schemas/iam_user_group_policy_write_body'
          title: User Group Policies
          type: array
      required:
        - name
        - policies
      title: Create User group with a set of policies
      type: object
    iam_update_user_group_body:
      properties:
        name:
          description: Name of the User group.
          example: My New User Group
          type: string
        policies:
          description: Policies attached to the User group
          items:
            allOf:
              - properties:
                  id:
                    description: Policy identifier.
                    example: f267e341f3dd4697bd3b9f71dd96247f
                    type: string
                required:
                  - id
                type: object
              - $ref: '#/components/schemas/iam_user_group_policy_write_body'
          title: User Group Policies
          type: array
      title: Create User group with a set of policies
      type: object
    iam_user_group:
      description: A group of policies resources.
      properties:
        created_on:
          description: Timestamp for the creation of the user group
          example: '2024-03-01T12:21:02.0000Z'
          format: date-time
          readOnly: true
          type: string
          x-auditable: true
        id:
          $ref: '#/components/schemas/iam_user_group_identifier'
        modified_on:
          description: Last time the user group was modified.
          example: '2024-03-01T12:21:02.0000Z'
          format: date-time
          readOnly: true
          type: string
          x-auditable: true
        name:
          description: Name of the user group.
          example: My New User Group
          readOnly: true
          type: string
          x-auditable: true
        policies:
          description: Policies attached to the User group
          items:
            description: Policy
            properties:
              access:
                $ref: '#/components/schemas/iam_access'
              id:
                $ref: '#/components/schemas/iam_policy_identifier'
              permission_groups:
                $ref: '#/components/schemas/iam_permission_groups'
              resource_groups:
                $ref: '#/components/schemas/iam_resource_groups'
            title: Authorization Policy
          title: User Group Policies
          type: array
      required:
        - id
        - name
        - created_on
        - modified_on
      type: object
    iam_user_group_identifier:
      allOf:
        - $ref: '#/components/schemas/iam_common_components-schemas-identifier'
      description: User Group identifier tag.
      title: User Group Identifier
    iam_user_group_member:
      description: Member attached to a User Group.
      properties:
        email:
          $ref: '#/components/schemas/iam_email'
        id:
          description: Account member identifier.
          example: 4f5f0c14a2a41d5063dd301b2f829f04
          readOnly: true
          type: string
        status:
          description: The member's status in the account.
          enum:
            - accepted
            - pending
          example: accepted
          readOnly: true
      required:
        - id
      type: object
    iam_user_group_member_identifier:
      allOf:
        - $ref: '#/components/schemas/iam_common_components-schemas-identifier'
      description: The identifier of an existing account Member.
      title: User Group Member Identifier
    iam_user_groups:
      description: A list of user groups for the account.
      items:
        $ref: '#/components/schemas/iam_user_group'
      title: User Groups
      type: array
