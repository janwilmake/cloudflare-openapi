openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /accounts/{account_id}/addressing/address_maps:
    get:
      description: List all address maps owned by the account.
      operationId: ip-address-management-address-maps-list-address-maps
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/addressing_components-schemas-response_collection
          description: List Address Maps response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: >-
                      #/components/schemas/addressing_components-schemas-response_collection
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: List Address Maps response failure
      security:
        - api_email: []
          api_key: []
      summary: List Address Maps
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
        - Address Maps Read
    post:
      description: Create a new address map under the account.
      operationId: ip-address-management-address-maps-create-address-map
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                description:
                  $ref: '#/components/schemas/addressing_schemas-description'
                enabled:
                  $ref: '#/components/schemas/addressing_enabled'
                ips:
                  items:
                    $ref: '#/components/schemas/addressing_ip_address'
                  type: array
                memberships:
                  $ref: '#/components/schemas/addressing_memberships'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_full_response'
          description: Create Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_full_response'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Create Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Create Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
  /accounts/{account_id}/addressing/address_maps/{address_map_id}:
    get:
      description: Show a particular address map owned by the account.
      operationId: ip-address-management-address-maps-address-map-details
      parameters:
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_full_response'
          description: Address Map Details response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_full_response'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Address Map Details response failure
      security:
        - api_email: []
          api_key: []
      summary: Address Map Details
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
        - Address Maps Read
    patch:
      description: Modify properties of an address map owned by the account.
      operationId: ip-address-management-address-maps-update-address-map
      parameters:
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                default_sni:
                  $ref: '#/components/schemas/addressing_default_sni'
                description:
                  $ref: '#/components/schemas/addressing_schemas-description'
                enabled:
                  $ref: '#/components/schemas/addressing_enabled'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/addressing_components-schemas-single_response
          description: Update Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: >-
                      #/components/schemas/addressing_components-schemas-single_response
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Update Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Update Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
    delete:
      description: >-
        Delete a particular address map owned by the account. An Address Map
        must be disabled before it can be deleted.
      operationId: ip-address-management-address-maps-delete-address-map
      parameters:
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Delete Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Delete Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Delete Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
  /accounts/{account_id}/addressing/address_maps/{address_map_id}/accounts/{account_id}:
    put:
      description: Add an account as a member of a particular address map.
      operationId: >-
        ip-address-management-address-maps-add-an-account-membership-to-an-address-map
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Add an account membership to an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Add an account membership to an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Add an account membership to an Address Map
      tags:
        - IP Address Management Address Maps
    delete:
      description: Remove an account as a member of a particular address map.
      operationId: >-
        ip-address-management-address-maps-remove-an-account-membership-from-an-address-map
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Remove an account membership from an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Remove an account membership from an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Remove an account membership from an Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
  /accounts/{account_id}/addressing/address_maps/{address_map_id}/ips/{ip_address}:
    put:
      description: >-
        Add an IP from a prefix owned by the account to a particular address
        map.
      operationId: ip-address-management-address-maps-add-an-ip-to-an-address-map
      parameters:
        - in: path
          name: ip_address
          required: true
          schema:
            $ref: '#/components/schemas/addressing_ip_address'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Add an IP to an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Add an IP to an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Add an IP to an Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
    delete:
      description: Remove an IP from a particular address map.
      operationId: ip-address-management-address-maps-remove-an-ip-from-an-address-map
      parameters:
        - in: path
          name: ip_address
          required: true
          schema:
            $ref: '#/components/schemas/addressing_ip_address'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Remove an IP from an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Remove an IP from an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Remove an IP from an Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
  /accounts/{account_id}/addressing/address_maps/{address_map_id}/zones/{zone_id}:
    put:
      description: Add a zone as a member of a particular address map.
      operationId: >-
        ip-address-management-address-maps-add-a-zone-membership-to-an-address-map
      parameters:
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_zone_identifier'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Add a zone membership to an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Add a zone membership to an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Add a zone membership to an Address Map
      tags:
        - IP Address Management Address Maps
    delete:
      description: Remove a zone as a member of a particular address map.
      operationId: >-
        ip-address-management-address-maps-remove-a-zone-membership-from-an-address-map
      parameters:
        - in: path
          name: zone_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_zone_identifier'
        - in: path
          name: address_map_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_address_map_identifier'
        - in: path
          name: account_id
          required: true
          schema:
            $ref: '#/components/schemas/addressing_account_identifier'
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/addressing_api-response-collection'
          description: Remove a zone membership from an Address Map response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/addressing_api-response-collection'
                  - $ref: >-
                      #/components/schemas/addressing_api-response-common-failure
          description: Remove a zone membership from an Address Map response failure
      security:
        - api_email: []
          api_key: []
      summary: Remove a zone membership from an Address Map
      tags:
        - IP Address Management Address Maps
      x-api-token-group:
        - Address Maps Write
components:
  schemas:
    addressing_account_identifier:
      description: Identifier of a Cloudflare account.
      example: 258def64c72dae45f3e4c8516e2111f2
      maxLength: 32
      type: string
      x-auditable: true
    addressing_address_map_identifier:
      description: Identifier of an Address Map.
      example: 055817b111884e0227e1be16a0be6ee0
      maxLength: 32
      type: string
      x-auditable: true
    addressing_api-response-collection:
      allOf:
        - $ref: '#/components/schemas/addressing_api-response-common'
        - properties:
            result_info:
              properties:
                count:
                  description: Total number of results for the requested service.
                  example: 1
                  type: number
                page:
                  description: Current page within paginated list of results.
                  example: 1
                  type: number
                per_page:
                  description: Number of results per page of results.
                  example: 20
                  type: number
                total_count:
                  description: Total results available without any search parameters.
                  example: 2000
                  type: number
              type: object
          type: object
      type: object
    addressing_api-response-common-failure:
      properties:
        errors:
          allOf:
            - $ref: '#/components/schemas/addressing_messages'
          example:
            - code: 7003
              message: No route for the URI
          minLength: 1
        messages:
          allOf:
            - $ref: '#/components/schemas/addressing_messages'
          example: []
        result:
          enum:
            - null
          nullable: true
          type: object
        success:
          description: Whether the API call was successful.
          enum:
            - false
          example: false
          type: boolean
      required:
        - success
        - errors
        - messages
        - result
      type: object
    addressing_components-schemas-response_collection:
      allOf:
        - $ref: '#/components/schemas/addressing_api-response-collection'
        - properties:
            result:
              items:
                $ref: '#/components/schemas/addressing_address-maps'
              type: array
    addressing_components-schemas-single_response:
      allOf:
        - $ref: '#/components/schemas/addressing_api-response-single'
        - properties:
            result:
              $ref: '#/components/schemas/addressing_address-maps'
    addressing_default_sni:
      description: >-
        If you have legacy TLS clients which do not send the TLS server name
        indicator, then you can specify one default SNI on the map. If
        Cloudflare receives a TLS handshake from a client without an SNI, it
        will respond with the default SNI on those IPs. The default SNI can be
        any valid zone or subdomain owned by the account.
      example: '*.example.com'
      nullable: true
      type: string
      x-auditable: true
    addressing_enabled:
      default: false
      description: >-
        Whether the Address Map is enabled or not. Cloudflare's DNS will not
        respond with IP addresses on an Address Map until the map is enabled.
      example: true
      nullable: true
      type: boolean
      x-auditable: true
    addressing_full_response:
      allOf:
        - $ref: '#/components/schemas/addressing_api-response-single'
        - properties:
            result:
              allOf:
                - $ref: '#/components/schemas/addressing_address-maps'
                - properties:
                    ips:
                      $ref: '#/components/schemas/addressing_ips'
                    memberships:
                      $ref: '#/components/schemas/addressing_memberships'
                  type: object
          type: object
    addressing_ip_address:
      description: An IPv4 or IPv6 address.
      example: 192.0.2.1
      type: string
      x-auditable: true
    addressing_memberships:
      description: >-
        Zones and Accounts which will be assigned IPs on this Address Map. A
        zone membership will take priority over an account membership.
      items:
        $ref: '#/components/schemas/addressing_address-maps-membership'
      type: array
    addressing_schemas-description:
      description: >-
        An optional description field which may be used to describe the types of
        IPs or zones on the map.
      example: My Ecommerce zones
      nullable: true
      type: string
      x-auditable: true
    addressing_zone_identifier:
      description: Identifier of a zone.
      example: 8ac8489932db6327334c9b6d58544cfe
      maxLength: 32
      type: string
      x-auditable: true
