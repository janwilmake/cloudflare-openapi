openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /accounts/{account_id}/magic/ipsec_tunnels:
    get:
      description: Lists IPsec tunnels associated with an account.
      operationId: magic-ipsec-tunnels-list-ipsec-tunnels
      parameters:
        - in: path
          name: account_id
          required: true
          schema:
            description: Identifier
            example: 023e105f4ecef8ad9ca31a8372d0c353
            maxLength: 32
            readOnly: true
            type: string
        - description: >-
            If true, the health check target in the response body will be
            presented using the new object format. Defaults to false.
          in: header
          name: x-magic-new-hc-target
          schema:
            type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - allOf:
                      - properties:
                          errors:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          messages:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          result:
                            anyOf:
                              - type: object
                              - items: {}
                                type: array
                              - type: string
                          success:
                            description: Whether the API call was successful
                            enum:
                              - true
                            example: true
                            type: boolean
                        required:
                          - success
                          - errors
                          - messages
                          - result
                        type: object
                      - properties:
                          result:
                            anyOf:
                              - nullable: true
                                type: object
                              - nullable: true
                                type: string
                    type: object
                  - properties:
                      result:
                        properties:
                          ipsec_tunnels:
                            items:
                              properties:
                                allow_null_cipher:
                                  description: >-
                                    When `true`, the tunnel can use a
                                    null-cipher (`ENCR_NULL`) in the ESP tunnel
                                    (Phase 2).
                                  example: true
                                  type: boolean
                                cloudflare_endpoint:
                                  description: >-
                                    The IP address assigned to the Cloudflare
                                    side of the IPsec tunnel.
                                  example: 203.0.113.1
                                  type: string
                                created_on:
                                  description: The date and time the tunnel was created.
                                  example: '2017-06-14T00:00:00Z'
                                  format: date-time
                                  readOnly: true
                                  type: string
                                  x-auditable: true
                                customer_endpoint:
                                  description: >-
                                    The IP address assigned to the customer side
                                    of the IPsec tunnel. Not required, but must
                                    be set for proactive traceroutes to work.
                                  example: 203.0.113.1
                                  type: string
                                description:
                                  description: An optional description forthe IPsec tunnel.
                                  example: Tunnel for ISP X
                                  type: string
                                health_check:
                                  allOf:
                                    - properties:
                                        enabled:
                                          default: true
                                          description: >-
                                            Determines whether to run healthchecks
                                            for a tunnel.
                                          example: true
                                          type: boolean
                                          x-auditable: true
                                        rate:
                                          default: mid
                                          description: >-
                                            How frequent the health check is run.
                                            The default value is `mid`.
                                          enum:
                                            - low
                                            - mid
                                            - high
                                          example: low
                                          type: string
                                          x-auditable: true
                                        target:
                                          description: >-
                                            The destination address in a request
                                            type health check. After the healthcheck
                                            is decapsulated at the customer end of
                                            the tunnel, the ICMP echo will be
                                            forwarded to this address. This field
                                            defaults to `customer_gre_endpoint
                                            address`. This field is ignored for
                                            bidirectional healthchecks as the
                                            interface_address (not assigned to the
                                            Cloudflare side of the tunnel) is used
                                            as the target. Must be in object form if
                                            the x-magic-new-hc-target header is set
                                            to true and string form if
                                            x-magic-new-hc-target is absent or set
                                            to false.
                                          oneOf:
                                            - description: >-
                                                The destination address in a request
                                                type health check. After the healthcheck
                                                is decapsulated at the customer end of
                                                the tunnel, the ICMP echo will be
                                                forwarded to this address. This field
                                                defaults to `customer_gre_endpoint
                                                address`. This field is ignored for
                                                bidirectional healthchecks as the
                                                interface_address (not assigned to the
                                                Cloudflare side of the tunnel) is used
                                                as the target.
                                              properties:
                                                effective:
                                                  description: >-
                                                    The effective health check target. If
                                                    'saved' is empty, then this field will
                                                    be populated with the calculated default
                                                    value on GET requests. Ignored in POST,
                                                    PUT, and PATCH requests.
                                                  example: 203.0.113.1
                                                  readOnly: true
                                                  type: string
                                                  x-auditable: true
                                                saved:
                                                  description: >-
                                                    The saved health check target. Setting
                                                    the value to the empty string indicates
                                                    that the calculated default value will
                                                    be used.
                                                  example: 203.0.113.1
                                                  type: string
                                                  x-auditable: true
                                              type: object
                                            - type: string
                                        type:
                                          default: reply
                                          description: >-
                                            The type of healthcheck to run, reply or
                                            request. The default value is `reply`.
                                          enum:
                                            - reply
                                            - request
                                          example: request
                                          type: string
                                          x-auditable: true
                                      type: object
                                    - properties:
                                        direction:
                                          default: unidirectional
                                          description: >-
                                            The direction of the flow of the
                                            healthcheck. Either unidirectional,
                                            where the probe comes to you via the
                                            tunnel and the result comes back to
                                            Cloudflare via the open Internet, or
                                            bidirectional where both the probe and
                                            result come and go via the tunnel.
                                          enum:
                                            - unidirectional
                                            - bidirectional
                                          example: bidirectional
                                          type: string
                                id:
                                  description: Identifier
                                  example: c4a7362d577a6c3019a474fd6f485821
                                  maxLength: 32
                                  readOnly: true
                                  type: string
                                  x-auditable: true
                                interface_address:
                                  description: >-
                                    A 31-bit prefix (/31 in CIDR notation)
                                    supporting two hosts, one for each side of
                                    the tunnel. Select the subnet from the
                                    following private IP space:
                                    10.0.0.0–10.255.255.255,
                                    172.16.0.0–172.31.255.255,
                                    192.168.0.0–192.168.255.255.
                                  example: 192.0.2.0/31
                                  type: string
                                  x-auditable: true
                                interface_address6:
                                  description: >-
                                    A 127 bit IPV6 prefix from within the
                                    virtual_subnet6 prefix space with the
                                    address being the first IP of the subnet and
                                    not same as the address of virtual_subnet6.
                                    Eg if virtual_subnet6 is
                                    2606:54c1:7:0:a9fe:12d2::/127 ,
                                    interface_address6 could be
                                    2606:54c1:7:0:a9fe:12d2:1:200/127
                                  example: 2606:54c1:7:0:a9fe:12d2:1:200/127
                                  type: string
                                  x-auditable: true
                                modified_on:
                                  description: >-
                                    The date and time the tunnel was last
                                    modified.
                                  example: '2017-06-14T05:20:00Z'
                                  format: date-time
                                  readOnly: true
                                  type: string
                                  x-auditable: true
                                name:
                                  description: >-
                                    The name of the IPsec tunnel. The name
                                    cannot share a name with other tunnels.
                                  example: IPsec_1
                                  type: string
                                psk_metadata:
                                  description: >-
                                    The PSK metadata that includes when the PSK
                                    was generated.
                                  properties:
                                    last_generated_on:
                                      description: >-
                                        The date and time the tunnel was last
                                        modified.
                                      example: '2017-06-14T05:20:00Z'
                                      format: date-time
                                      readOnly: true
                                      type: string
                                      x-auditable: true
                                  type: object
                                replay_protection:
                                  default: false
                                  description: >-
                                    If `true`, then IPsec replay protection will
                                    be supported in the Cloudflare-to-customer
                                    direction.
                                  example: false
                                  type: boolean
                              required:
                                - id
                                - name
                                - cloudflare_endpoint
                                - interface_address
                              type: object
                            type: array
          description: List IPsec tunnels response
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - allOf:
                      - allOf:
                          - properties:
                              errors:
                                example: []
                                items:
                                  properties:
                                    code:
                                      minimum: 1000
                                      type: integer
                                    message:
                                      type: string
                                  required:
                                    - code
                                    - message
                                  type: object
                                  uniqueItems: true
                                type: array
                              messages:
                                example: []
                                items:
                                  properties:
                                    code:
                                      minimum: 1000
                                      type: integer
                                    message:
                                      type: string
                                  required:
                                    - code
                                    - message
                                  type: object
                                  uniqueItems: true
                                type: array
                              result:
                                anyOf:
                                  - type: object
                                  - items: {}
                                    type: array
                                  - type: string
                              success:
                                description: Whether the API call was successful
                                enum:
                                  - true
                                example: true
                                type: boolean
                            required:
                              - success
                              - errors
                              - messages
                              - result
                            type: object
                          - properties:
                              result:
                                anyOf:
                                  - nullable: true
                                    type: object
                                  - nullable: true
                                    type: string
                        type: object
                      - properties:
                          result:
                            properties:
                              ipsec_tunnels:
                                items:
                                  properties:
                                    allow_null_cipher:
                                      description: >-
                                        When `true`, the tunnel can use a
                                        null-cipher (`ENCR_NULL`) in the ESP
                                        tunnel (Phase 2).
                                      example: true
                                      type: boolean
                                    cloudflare_endpoint:
                                      description: >-
                                        The IP address assigned to the
                                        Cloudflare side of the IPsec tunnel.
                                      example: 203.0.113.1
                                      type: string
                                    created_on:
                                      description: >-
                                        The date and time the tunnel was
                                        created.
                                      example: '2017-06-14T00:00:00Z'
                                      format: date-time
                                      readOnly: true
                                      type: string
                                      x-auditable: true
                                    customer_endpoint:
                                      description: >-
                                        The IP address assigned to the customer
                                        side of the IPsec tunnel. Not required,
                                        but must be set for proactive
                                        traceroutes to work.
                                      example: 203.0.113.1
                                      type: string
                                    description:
                                      description: >-
                                        An optional description forthe IPsec
                                        tunnel.
                                      example: Tunnel for ISP X
                                      type: string
                                    health_check:
                                      allOf:
                                        - properties:
                                            enabled:
                                              default: true
                                              description: >-
                                                Determines whether to run healthchecks
                                                for a tunnel.
                                              example: true
                                              type: boolean
                                              x-auditable: true
                                            rate:
                                              default: mid
                                              description: >-
                                                How frequent the health check is run.
                                                The default value is `mid`.
                                              enum:
                                                - low
                                                - mid
                                                - high
                                              example: low
                                              type: string
                                              x-auditable: true
                                            target:
                                              description: >-
                                                The destination address in a request
                                                type health check. After the healthcheck
                                                is decapsulated at the customer end of
                                                the tunnel, the ICMP echo will be
                                                forwarded to this address. This field
                                                defaults to `customer_gre_endpoint
                                                address`. This field is ignored for
                                                bidirectional healthchecks as the
                                                interface_address (not assigned to the
                                                Cloudflare side of the tunnel) is used
                                                as the target. Must be in object form if
                                                the x-magic-new-hc-target header is set
                                                to true and string form if
                                                x-magic-new-hc-target is absent or set
                                                to false.
                                              oneOf:
                                                - description: >-
                                                    The destination address in a request
                                                    type health check. After the healthcheck
                                                    is decapsulated at the customer end of
                                                    the tunnel, the ICMP echo will be
                                                    forwarded to this address. This field
                                                    defaults to `customer_gre_endpoint
                                                    address`. This field is ignored for
                                                    bidirectional healthchecks as the
                                                    interface_address (not assigned to the
                                                    Cloudflare side of the tunnel) is used
                                                    as the target.
                                                  properties:
                                                    effective:
                                                      description: >-
                                                        The effective health check target. If
                                                        'saved' is empty, then this field will
                                                        be populated with the calculated default
                                                        value on GET requests. Ignored in POST,
                                                        PUT, and PATCH requests.
                                                      example: 203.0.113.1
                                                      readOnly: true
                                                      type: string
                                                      x-auditable: true
                                                    saved:
                                                      description: >-
                                                        The saved health check target. Setting
                                                        the value to the empty string indicates
                                                        that the calculated default value will
                                                        be used.
                                                      example: 203.0.113.1
                                                      type: string
                                                      x-auditable: true
                                                  type: object
                                                - type: string
                                            type:
                                              default: reply
                                              description: >-
                                                The type of healthcheck to run, reply or
                                                request. The default value is `reply`.
                                              enum:
                                                - reply
                                                - request
                                              example: request
                                              type: string
                                              x-auditable: true
                                          type: object
                                        - properties:
                                            direction:
                                              default: unidirectional
                                              description: >-
                                                The direction of the flow of the
                                                healthcheck. Either unidirectional,
                                                where the probe comes to you via the
                                                tunnel and the result comes back to
                                                Cloudflare via the open Internet, or
                                                bidirectional where both the probe and
                                                result come and go via the tunnel.
                                              enum:
                                                - unidirectional
                                                - bidirectional
                                              example: bidirectional
                                              type: string
                                    id:
                                      description: Identifier
                                      example: c4a7362d577a6c3019a474fd6f485821
                                      maxLength: 32
                                      readOnly: true
                                      type: string
                                      x-auditable: true
                                    interface_address:
                                      description: >-
                                        A 31-bit prefix (/31 in CIDR notation)
                                        supporting two hosts, one for each side
                                        of the tunnel. Select the subnet from
                                        the following private IP space:
                                        10.0.0.0–10.255.255.255,
                                        172.16.0.0–172.31.255.255,
                                        192.168.0.0–192.168.255.255.
                                      example: 192.0.2.0/31
                                      type: string
                                      x-auditable: true
                                    interface_address6:
                                      description: >-
                                        A 127 bit IPV6 prefix from within the
                                        virtual_subnet6 prefix space with the
                                        address being the first IP of the subnet
                                        and not same as the address of
                                        virtual_subnet6. Eg if virtual_subnet6
                                        is 2606:54c1:7:0:a9fe:12d2::/127 ,
                                        interface_address6 could be
                                        2606:54c1:7:0:a9fe:12d2:1:200/127
                                      example: 2606:54c1:7:0:a9fe:12d2:1:200/127
                                      type: string
                                      x-auditable: true
                                    modified_on:
                                      description: >-
                                        The date and time the tunnel was last
                                        modified.
                                      example: '2017-06-14T05:20:00Z'
                                      format: date-time
                                      readOnly: true
                                      type: string
                                      x-auditable: true
                                    name:
                                      description: >-
                                        The name of the IPsec tunnel. The name
                                        cannot share a name with other tunnels.
                                      example: IPsec_1
                                      type: string
                                    psk_metadata:
                                      description: >-
                                        The PSK metadata that includes when the
                                        PSK was generated.
                                      properties:
                                        last_generated_on:
                                          description: >-
                                            The date and time the tunnel was last
                                            modified.
                                          example: '2017-06-14T05:20:00Z'
                                          format: date-time
                                          readOnly: true
                                          type: string
                                          x-auditable: true
                                      type: object
                                    replay_protection:
                                      default: false
                                      description: >-
                                        If `true`, then IPsec replay protection
                                        will be supported in the
                                        Cloudflare-to-customer direction.
                                      example: false
                                      type: boolean
                                  required:
                                    - id
                                    - name
                                    - cloudflare_endpoint
                                    - interface_address
                                  type: object
                                type: array
                  - properties:
                      errors:
                        allOf:
                          - example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                        example:
                          - code: 7003
                            message: No route for the URI
                        minLength: 1
                      messages:
                        allOf:
                          - example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                        example: []
                      result:
                        enum:
                          - null
                        nullable: true
                        type: object
                      success:
                        description: Whether the API call was successful
                        enum:
                          - false
                        example: false
                        type: boolean
                    required:
                      - success
                      - errors
                      - messages
                      - result
                    type: object
          description: List IPsec tunnels response failure
      security:
        - api_email: []
          api_key: []
          api_token: []
      summary: List IPsec tunnels
      tags:
        - Magic IPsec tunnels
      x-api-token-group:
        - Magic WAN Write
        - Magic WAN Read
        - Magic Transit Read
        - Magic Transit Write
      x-cfPlanAvailability:
        business: false
        enterprise: true
        free: false
        pro: false
