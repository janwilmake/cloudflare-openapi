openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /accounts/{account_id}/devices/policy/{policy_id}:
    delete:
      description: >-
        Deletes a device settings profile and fetches a list of the remaining
        profiles for an account.
      operationId: devices-delete-device-settings-policy
      parameters:
        - in: path
          name: policy_id
          required: true
          schema:
            example: f174e90a-fafe-4643-bbbc-4a0ed4fc8415
            maxLength: 36
            type: string
            x-auditable: true
        - in: path
          name: account_id
          required: true
          schema:
            example: 699d98642c564d2e855e9661899b7252
      requestBody:
        content:
          application/json: {}
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - allOf:
                      - properties:
                          errors:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          messages:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          result:
                            anyOf:
                              - type: object
                              - items:
                                  type: object
                                type: array
                              - type: string
                          success:
                            description: Whether the API call was successful.
                            enum:
                              - true
                            example: true
                            type: boolean
                        required:
                          - success
                          - errors
                          - messages
                          - result
                        type: object
                      - properties:
                          result:
                            items:
                              type: object
                            nullable: true
                            type: array
                          result_info:
                            properties:
                              count:
                                description: >-
                                  Total number of results for the requested
                                  service.
                                example: 1
                                type: number
                              page:
                                description: Current page within paginated list of results.
                                example: 1
                                type: number
                              per_page:
                                description: Number of results per page of results.
                                example: 20
                                type: number
                              total_count:
                                description: >-
                                  Total results available without any search
                                  parameters.
                                example: 2000
                                type: number
                            type: object
                        type: object
                    type: object
                  - properties:
                      result:
                        items:
                          properties:
                            allow_mode_switch:
                              default: false
                              description: >-
                                Whether to allow the user to switch WARP between
                                modes.
                              example: true
                              type: boolean
                            allow_updates:
                              default: false
                              description: >-
                                Whether to receive update notifications when a
                                new version of the client is available.
                              example: true
                              type: boolean
                            allowed_to_leave:
                              default: true
                              description: >-
                                Whether to allow devices to leave the
                                organization.
                              example: true
                              type: boolean
                            auto_connect:
                              default: 0
                              description: >-
                                The amount of time in seconds to reconnect after
                                having been disabled.
                              example: 0
                              type: number
                            captive_portal:
                              default: 180
                              description: >-
                                Turn on the captive portal after the specified
                                amount of time.
                              example: 180
                              type: number
                            default:
                              description: >-
                                Whether the policy is the default policy for an
                                account.
                              example: false
                              type: boolean
                            description:
                              description: A description of the policy.
                              example: Policy for test teams.
                              maxLength: 500
                              type: string
                            disable_auto_fallback:
                              default: false
                              description: >-
                                If the `dns_server` field of a fallback domain
                                is not present, the client will fall back to a
                                best guess of the default/system DNS resolvers
                                unless this policy option is set to `true`.
                              example: true
                              type: boolean
                              x-auditable: true
                            enabled:
                              description: >-
                                Whether the policy will be applied to matching
                                devices.
                              example: true
                              type: boolean
                            exclude:
                              default:
                                - address: 10.0.0.0/8
                                - address: 100.64.0.0/10
                                - address: 169.254.0.0/16
                                  description: DHCP Unspecified
                                - address: 172.16.0.0/12
                                - address: 192.0.0.0/24
                                - address: 192.168.0.0/16
                                - address: 224.0.0.0/24
                                - address: 240.0.0.0/4
                                - address: 255.255.255.255/32
                                  description: DHCP Broadcast
                                - address: fe80::/10
                                  description: IPv6 Link Local
                                - address: fd00::/8
                                - address: ff01::/16
                                - address: ff02::/16
                                - address: ff03::/16
                                - address: ff04::/16
                                - address: ff05::/16
                              description: >-
                                List of routes excluded in the WARP client's
                                tunnel.
                              items:
                                oneOf:
                                  - properties:
                                      address:
                                        description: >-
                                          The address in CIDR format to exclude
                                          from the tunnel. If `address` is
                                          present, `host` must not be present.
                                        example: 192.0.2.0/24
                                        type: string
                                      description:
                                        description: >-
                                          A description of the Split Tunnel item,
                                          displayed in the client UI.
                                        example: Exclude testing domains from the tunnel
                                        maxLength: 100
                                        type: string
                                    required:
                                      - address
                                    type: object
                                  - properties:
                                      description:
                                        description: >-
                                          A description of the Split Tunnel item,
                                          displayed in the client UI.
                                        example: Exclude testing domains from the tunnel
                                        maxLength: 100
                                        type: string
                                      host:
                                        description: >-
                                          The domain name to exclude from the
                                          tunnel. If `host` is present, `address`
                                          must not be present.
                                        example: '*.example.com'
                                        type: string
                                    required:
                                      - host
                                    type: object
                                type: object
                              type: array
                            exclude_office_ips:
                              default: false
                              description: >-
                                Whether to add Microsoft IPs to Split Tunnel
                                exclusions.
                              example: true
                              type: boolean
                            fallback_domains:
                              default:
                                - suffix: intranet
                                - suffix: internal
                                - suffix: private
                                - suffix: localdomain
                                - suffix: domain
                                - suffix: lan
                                - suffix: home
                                - suffix: host
                                - suffix: corp
                                - suffix: local
                                - suffix: localhost
                                - suffix: home.arpa
                                - suffix: invalid
                                - suffix: test
                              items:
                                properties:
                                  description:
                                    description: >-
                                      A description of the fallback domain,
                                      displayed in the client UI.
                                    example: Domain bypass for local development
                                    maxLength: 100
                                    type: string
                                    x-auditable: true
                                  dns_server:
                                    description: >-
                                      A list of IP addresses to handle domain
                                      resolution.
                                    items:
                                      description: IPv4 or IPv6 address.
                                      example: 1.1.1.1
                                      type: string
                                      x-auditable: true
                                    type: array
                                  suffix:
                                    description: >-
                                      The domain suffix to match when resolving
                                      locally.
                                    example: example.com
                                    type: string
                                    x-auditable: true
                                required:
                                  - suffix
                                type: object
                              type: array
                            gateway_unique_id:
                              example: 699d98642c564d2e855e9661899b7252
                              type: string
                            include:
                              description: >-
                                List of routes included in the WARP client's
                                tunnel.
                              items:
                                oneOf:
                                  - properties:
                                      address:
                                        description: >-
                                          The address in CIDR format to include in
                                          the tunnel. If `address` is present,
                                          `host` must not be present.
                                        example: 192.0.2.0/24
                                        type: string
                                      description:
                                        description: >-
                                          A description of the Split Tunnel item,
                                          displayed in the client UI.
                                        example: Include testing domains in the tunnel
                                        maxLength: 100
                                        type: string
                                    required:
                                      - address
                                    type: object
                                  - properties:
                                      description:
                                        description: >-
                                          A description of the Split Tunnel item,
                                          displayed in the client UI.
                                        example: Include testing domains in the tunnel
                                        maxLength: 100
                                        type: string
                                      host:
                                        description: >-
                                          The domain name to include in the
                                          tunnel. If `host` is present, `address`
                                          must not be present.
                                        example: '*.example.com'
                                        type: string
                                    required:
                                      - host
                                    type: object
                                type: object
                              type: array
                            lan_allow_minutes:
                              description: >-
                                The amount of time in minutes a user is allowed
                                access to their LAN. A value of 0 will allow LAN
                                access until the next WARP reconnection, such as
                                a reboot or a laptop waking from sleep. Note
                                that this field is omitted from the response if
                                null or unset.
                              example: 30
                              type: number
                            lan_allow_subnet_size:
                              description: >-
                                The size of the subnet for the local access
                                network. Note that this field is omitted from
                                the response if null or unset.
                              example: 24
                              type: number
                            match:
                              description: >-
                                The wirefilter expression to match devices.
                                Available values: "identity.email",
                                "identity.groups.id", "identity.groups.name",
                                "identity.groups.email",
                                "identity.service_token_uuid",
                                "identity.saml_attributes", "network",
                                "os.name", "os.version".
                              example: identity.email == "test@cloudflare.com"
                              maxLength: 500
                              type: string
                            name:
                              description: The name of the device settings profile.
                              example: Allow Developers
                              maxLength: 100
                              type: string
                            policy_id:
                              example: f174e90a-fafe-4643-bbbc-4a0ed4fc8415
                              maxLength: 36
                              type: string
                              x-auditable: true
                            precedence:
                              description: >-
                                The precedence of the policy. Lower values
                                indicate higher precedence. Policies will be
                                evaluated in ascending order of this field.
                              example: 100
                              type: number
                            register_interface_ip_with_dns:
                              default: true
                              description: >-
                                Determines if the operating system will register
                                WARP's local interface IP with your on-premises
                                DNS server.
                              example: true
                              type: boolean
                            sccm_vpn_boundary_support:
                              default: false
                              description: >-
                                Determines whether the WARP client indicates to
                                SCCM that it is inside a VPN boundary. (Windows
                                only).
                              example: false
                              type: boolean
                            service_mode_v2:
                              properties:
                                mode:
                                  description: The mode to run the WARP client under.
                                  example: proxy
                                  type: string
                                  x-auditable: true
                                port:
                                  description: The port number when used with proxy mode.
                                  example: 3000
                                  type: number
                                  x-auditable: true
                              type: object
                            support_url:
                              default: ''
                              description: >-
                                The URL to launch when the Send Feedback button
                                is clicked.
                              example: https://1.1.1.1/help
                              type: string
                            switch_locked:
                              default: false
                              description: >-
                                Whether to allow the user to turn off the WARP
                                switch and disconnect the client.
                              example: true
                              type: boolean
                            target_tests:
                              items:
                                properties:
                                  id:
                                    description: >-
                                      The id of the DEX test targeting this
                                      policy.
                                    type: string
                                  name:
                                    description: >-
                                      The name of the DEX test targeting this
                                      policy.
                                    type: string
                                type: object
                              type: array
                            tunnel_protocol:
                              default: ''
                              description: Determines which tunnel protocol to use.
                              example: wireguard
                              type: string
                          type: object
                        type: array
                    type: object
          description: Delete a device settings profile response.
        4XX:
          content:
            application/json:
              schema:
                allOf:
                  - allOf:
                      - allOf:
                          - properties:
                              errors:
                                example: []
                                items:
                                  properties:
                                    code:
                                      minimum: 1000
                                      type: integer
                                    message:
                                      type: string
                                  required:
                                    - code
                                    - message
                                  type: object
                                  uniqueItems: true
                                type: array
                              messages:
                                example: []
                                items:
                                  properties:
                                    code:
                                      minimum: 1000
                                      type: integer
                                    message:
                                      type: string
                                  required:
                                    - code
                                    - message
                                  type: object
                                  uniqueItems: true
                                type: array
                              result:
                                anyOf:
                                  - type: object
                                  - items:
                                      type: object
                                    type: array
                                  - type: string
                              success:
                                description: Whether the API call was successful.
                                enum:
                                  - true
                                example: true
                                type: boolean
                            required:
                              - success
                              - errors
                              - messages
                              - result
                            type: object
                          - properties:
                              result:
                                items:
                                  type: object
                                nullable: true
                                type: array
                              result_info:
                                properties:
                                  count:
                                    description: >-
                                      Total number of results for the requested
                                      service.
                                    example: 1
                                    type: number
                                  page:
                                    description: >-
                                      Current page within paginated list of
                                      results.
                                    example: 1
                                    type: number
                                  per_page:
                                    description: Number of results per page of results.
                                    example: 20
                                    type: number
                                  total_count:
                                    description: >-
                                      Total results available without any search
                                      parameters.
                                    example: 2000
                                    type: number
                                type: object
                            type: object
                        type: object
                      - properties:
                          result:
                            items:
                              properties:
                                allow_mode_switch:
                                  default: false
                                  description: >-
                                    Whether to allow the user to switch WARP
                                    between modes.
                                  example: true
                                  type: boolean
                                allow_updates:
                                  default: false
                                  description: >-
                                    Whether to receive update notifications when
                                    a new version of the client is available.
                                  example: true
                                  type: boolean
                                allowed_to_leave:
                                  default: true
                                  description: >-
                                    Whether to allow devices to leave the
                                    organization.
                                  example: true
                                  type: boolean
                                auto_connect:
                                  default: 0
                                  description: >-
                                    The amount of time in seconds to reconnect
                                    after having been disabled.
                                  example: 0
                                  type: number
                                captive_portal:
                                  default: 180
                                  description: >-
                                    Turn on the captive portal after the
                                    specified amount of time.
                                  example: 180
                                  type: number
                                default:
                                  description: >-
                                    Whether the policy is the default policy for
                                    an account.
                                  example: false
                                  type: boolean
                                description:
                                  description: A description of the policy.
                                  example: Policy for test teams.
                                  maxLength: 500
                                  type: string
                                disable_auto_fallback:
                                  default: false
                                  description: >-
                                    If the `dns_server` field of a fallback
                                    domain is not present, the client will fall
                                    back to a best guess of the default/system
                                    DNS resolvers unless this policy option is
                                    set to `true`.
                                  example: true
                                  type: boolean
                                  x-auditable: true
                                enabled:
                                  description: >-
                                    Whether the policy will be applied to
                                    matching devices.
                                  example: true
                                  type: boolean
                                exclude:
                                  default:
                                    - address: 10.0.0.0/8
                                    - address: 100.64.0.0/10
                                    - address: 169.254.0.0/16
                                      description: DHCP Unspecified
                                    - address: 172.16.0.0/12
                                    - address: 192.0.0.0/24
                                    - address: 192.168.0.0/16
                                    - address: 224.0.0.0/24
                                    - address: 240.0.0.0/4
                                    - address: 255.255.255.255/32
                                      description: DHCP Broadcast
                                    - address: fe80::/10
                                      description: IPv6 Link Local
                                    - address: fd00::/8
                                    - address: ff01::/16
                                    - address: ff02::/16
                                    - address: ff03::/16
                                    - address: ff04::/16
                                    - address: ff05::/16
                                  description: >-
                                    List of routes excluded in the WARP client's
                                    tunnel.
                                  items:
                                    oneOf:
                                      - properties:
                                          address:
                                            description: >-
                                              The address in CIDR format to exclude
                                              from the tunnel. If `address` is
                                              present, `host` must not be present.
                                            example: 192.0.2.0/24
                                            type: string
                                          description:
                                            description: >-
                                              A description of the Split Tunnel item,
                                              displayed in the client UI.
                                            example: Exclude testing domains from the tunnel
                                            maxLength: 100
                                            type: string
                                        required:
                                          - address
                                        type: object
                                      - properties:
                                          description:
                                            description: >-
                                              A description of the Split Tunnel item,
                                              displayed in the client UI.
                                            example: Exclude testing domains from the tunnel
                                            maxLength: 100
                                            type: string
                                          host:
                                            description: >-
                                              The domain name to exclude from the
                                              tunnel. If `host` is present, `address`
                                              must not be present.
                                            example: '*.example.com'
                                            type: string
                                        required:
                                          - host
                                        type: object
                                    type: object
                                  type: array
                                exclude_office_ips:
                                  default: false
                                  description: >-
                                    Whether to add Microsoft IPs to Split Tunnel
                                    exclusions.
                                  example: true
                                  type: boolean
                                fallback_domains:
                                  default:
                                    - suffix: intranet
                                    - suffix: internal
                                    - suffix: private
                                    - suffix: localdomain
                                    - suffix: domain
                                    - suffix: lan
                                    - suffix: home
                                    - suffix: host
                                    - suffix: corp
                                    - suffix: local
                                    - suffix: localhost
                                    - suffix: home.arpa
                                    - suffix: invalid
                                    - suffix: test
                                  items:
                                    properties:
                                      description:
                                        description: >-
                                          A description of the fallback domain,
                                          displayed in the client UI.
                                        example: Domain bypass for local development
                                        maxLength: 100
                                        type: string
                                        x-auditable: true
                                      dns_server:
                                        description: >-
                                          A list of IP addresses to handle domain
                                          resolution.
                                        items:
                                          description: IPv4 or IPv6 address.
                                          example: 1.1.1.1
                                          type: string
                                          x-auditable: true
                                        type: array
                                      suffix:
                                        description: >-
                                          The domain suffix to match when
                                          resolving locally.
                                        example: example.com
                                        type: string
                                        x-auditable: true
                                    required:
                                      - suffix
                                    type: object
                                  type: array
                                gateway_unique_id:
                                  example: 699d98642c564d2e855e9661899b7252
                                  type: string
                                include:
                                  description: >-
                                    List of routes included in the WARP client's
                                    tunnel.
                                  items:
                                    oneOf:
                                      - properties:
                                          address:
                                            description: >-
                                              The address in CIDR format to include in
                                              the tunnel. If `address` is present,
                                              `host` must not be present.
                                            example: 192.0.2.0/24
                                            type: string
                                          description:
                                            description: >-
                                              A description of the Split Tunnel item,
                                              displayed in the client UI.
                                            example: Include testing domains in the tunnel
                                            maxLength: 100
                                            type: string
                                        required:
                                          - address
                                        type: object
                                      - properties:
                                          description:
                                            description: >-
                                              A description of the Split Tunnel item,
                                              displayed in the client UI.
                                            example: Include testing domains in the tunnel
                                            maxLength: 100
                                            type: string
                                          host:
                                            description: >-
                                              The domain name to include in the
                                              tunnel. If `host` is present, `address`
                                              must not be present.
                                            example: '*.example.com'
                                            type: string
                                        required:
                                          - host
                                        type: object
                                    type: object
                                  type: array
                                lan_allow_minutes:
                                  description: >-
                                    The amount of time in minutes a user is
                                    allowed access to their LAN. A value of 0
                                    will allow LAN access until the next WARP
                                    reconnection, such as a reboot or a laptop
                                    waking from sleep. Note that this field is
                                    omitted from the response if null or unset.
                                  example: 30
                                  type: number
                                lan_allow_subnet_size:
                                  description: >-
                                    The size of the subnet for the local access
                                    network. Note that this field is omitted
                                    from the response if null or unset.
                                  example: 24
                                  type: number
                                match:
                                  description: >-
                                    The wirefilter expression to match devices.
                                    Available values: "identity.email",
                                    "identity.groups.id",
                                    "identity.groups.name",
                                    "identity.groups.email",
                                    "identity.service_token_uuid",
                                    "identity.saml_attributes", "network",
                                    "os.name", "os.version".
                                  example: identity.email == "test@cloudflare.com"
                                  maxLength: 500
                                  type: string
                                name:
                                  description: The name of the device settings profile.
                                  example: Allow Developers
                                  maxLength: 100
                                  type: string
                                policy_id:
                                  example: f174e90a-fafe-4643-bbbc-4a0ed4fc8415
                                  maxLength: 36
                                  type: string
                                  x-auditable: true
                                precedence:
                                  description: >-
                                    The precedence of the policy. Lower values
                                    indicate higher precedence. Policies will be
                                    evaluated in ascending order of this field.
                                  example: 100
                                  type: number
                                register_interface_ip_with_dns:
                                  default: true
                                  description: >-
                                    Determines if the operating system will
                                    register WARP's local interface IP with your
                                    on-premises DNS server.
                                  example: true
                                  type: boolean
                                sccm_vpn_boundary_support:
                                  default: false
                                  description: >-
                                    Determines whether the WARP client indicates
                                    to SCCM that it is inside a VPN boundary.
                                    (Windows only).
                                  example: false
                                  type: boolean
                                service_mode_v2:
                                  properties:
                                    mode:
                                      description: The mode to run the WARP client under.
                                      example: proxy
                                      type: string
                                      x-auditable: true
                                    port:
                                      description: >-
                                        The port number when used with proxy
                                        mode.
                                      example: 3000
                                      type: number
                                      x-auditable: true
                                  type: object
                                support_url:
                                  default: ''
                                  description: >-
                                    The URL to launch when the Send Feedback
                                    button is clicked.
                                  example: https://1.1.1.1/help
                                  type: string
                                switch_locked:
                                  default: false
                                  description: >-
                                    Whether to allow the user to turn off the
                                    WARP switch and disconnect the client.
                                  example: true
                                  type: boolean
                                target_tests:
                                  items:
                                    properties:
                                      id:
                                        description: >-
                                          The id of the DEX test targeting this
                                          policy.
                                        type: string
                                      name:
                                        description: >-
                                          The name of the DEX test targeting this
                                          policy.
                                        type: string
                                    type: object
                                  type: array
                                tunnel_protocol:
                                  default: ''
                                  description: Determines which tunnel protocol to use.
                                  example: wireguard
                                  type: string
                              type: object
                            type: array
                        type: object
                  - properties:
                      errors:
                        allOf:
                          - example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                        example:
                          - code: 7003
                            message: No route for the URI
                        minLength: 1
                      messages:
                        allOf:
                          - example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                message:
                                  type: string
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                        example: []
                      result:
                        enum:
                          - null
                        nullable: true
                        type: object
                      success:
                        description: Whether the API call was successful.
                        enum:
                          - false
                        example: false
                        type: boolean
                    required:
                      - success
                      - errors
                      - messages
                      - result
                    type: object
          description: Delete a device settings profile response failure.
      security:
        - api_email: []
          api_key: []
          api_token: []
      summary: Delete a device settings profile
      tags:
        - Devices
      x-api-token-group:
        - Zero Trust Write
