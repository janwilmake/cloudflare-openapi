openapi: 3.0.3
info:
  description: >-
    Welcome to Cloudflare's API documentation site. We are experimenting with an
    updated version of our API documentation - check out
    [developers.cloudflare.com/api-next/](https://developers.cloudflare.com/api-next/)
    to test out the new experience.


    To get started using Cloudflare's products and services via the API, refer
    to [how to interact with
    Cloudflare](https://developers.cloudflare.com/fundamentals/basic-tasks/interact-with-cloudflare/),
    which covers using tools like
    [Terraform](https://developers.cloudflare.com/terraform/#cloudflare-terraform)
    and the [official
    SDKs](https://developers.cloudflare.com/fundamentals/api/reference/sdks/) to
    maintain your Cloudflare resources.


    Using the Cloudflare API requires authentication so that Cloudflare knows
    who is making requests and what permissions you have. Create an API token to
    grant access to the API to perform actions. You can also authenticate with
    [API
    keys](https://developers.cloudflare.com/fundamentals/api/get-started/keys/),
    but these keys have [several
    limitations](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#limitations)
    that make them less secure than API tokens. Whenever possible, use API
    tokens to interact with the Cloudflare API.


    To create an API token, from the Cloudflare dashboard, go to My Profile >
    API Tokens and select Create Token. For more information on how to create
    and troubleshoot API tokens, refer to

    our [API fundamentals](https://developers.cloudflare.com/fundamentals/api/).


    For information regarding rate limits, refer to our [API Rate
    Limits](https://developers.cloudflare.com/cloudflare-for-platforms/workers-for-platforms/platform/limits/#api-rate-limits).


    Totally new to Cloudflare? [Start
    here](https://developers.cloudflare.com/fundamentals/get-started/).
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause
  title: Cloudflare API
  version: 4.0.0
servers:
  - description: Client API
    url: https://api.cloudflare.com/client/v4
paths:
  /zones/{zone_id}/spectrum/analytics/events/summary:
    get:
      description: >-
        Retrieves a list of summarised aggregate metrics over a given time
        period.
      operationId: spectrum-analytics-(-summary)-get-analytics-summary
      parameters:
        - in: path
          name: zone_id
          required: true
          schema:
            description: Identifier.
            example: 023e105f4ecef8ad9ca31a8372d0c353
            maxLength: 32
            type: string
            x-auditable: true
        - in: query
          name: dimensions
          schema:
            description: >-
              Can be used to break down the data by given attributes. Options
              are: 


              Dimension                 | Name                            |
              Example

              --------------------------|---------------------------------|--------------------------

              event                     | Connection Event                |
              connect, progress, disconnect, originError, clientFiltered

              appID                     | Application ID                  |
              40d67c87c6cd4b889a4fd57805225e85

              coloName                  | Colo Name                       | SFO

              ipVersion                 | IP version used by the client   | 4,
              6.
            example:
              - event
              - appID
            items:
              enum:
                - event
                - appID
                - coloName
                - ipVersion
              type: string
            type: array
        - in: query
          name: sort
          schema:
            description: >-
              The sort order for the result set; sort fields must be included in
              `metrics` or `dimensions`.
            example:
              - +count
              - '-bytesIngress'
            items:
              type: string
            type: array
        - in: query
          name: until
          schema:
            allOf:
              - description: >-
                  End of time interval to query, defaults to current time.
                  Timestamp must be in RFC3339 format and uses UTC unless
                  otherwise specified.
              - example: '2014-01-01T05:20:00.12345Z'
                format: date-time
                type: string
                x-auditable: true
        - in: query
          name: metrics
          schema:
            description: >-
              One or more metrics to compute. Options are: 


              Metric                    | Name                                |
              Example                  | Unit

              --------------------------|-------------------------------------|--------------------------|--------------------------

              count                     | Count of total events               |
              1000                     | Count

              bytesIngress              | Sum of ingress bytes                |
              1000                     | Sum

              bytesEgress               | Sum of egress bytes                 |
              1000                     | Sum

              durationAvg               | Average connection duration         |
              1.0                      | Time in milliseconds

              durationMedian            | Median connection duration          |
              1.0                      | Time in milliseconds

              duration90th              | 90th percentile connection duration |
              1.0                      | Time in milliseconds

              duration99th              | 99th percentile connection duration |
              1.0                      | Time in milliseconds.
            example:
              - count
              - bytesIngress
            items:
              enum:
                - count
                - bytesIngress
                - bytesEgress
                - durationAvg
                - durationMedian
                - duration90th
                - duration99th
              type: string
            type: array
        - in: query
          name: filters
          schema:
            description: >-
              Used to filter rows by one or more dimensions. Filters can be
              combined using OR and AND boolean logic. AND takes precedence over
              OR in all the expressions. The OR operator is defined using a
              comma (,) or OR keyword surrounded by whitespace. The AND operator
              is defined using a semicolon (;) or AND keyword surrounded by
              whitespace. Note that the semicolon is a reserved character in
              URLs (rfc1738) and needs to be percent-encoded as %3B. Comparison
              options are:


              Operator                  | Name                            | URL
              Encoded

              --------------------------|---------------------------------|--------------------------

              ==                        | Equals                          |
              %3D%3D

              !=                        | Does not equals                 | !%3D

              \>                        | Greater Than                    | %3E

              \<                        | Less Than                       | %3C

              \>=                       | Greater than or equal to        |
              %3E%3D

              \<=                       | Less than or equal to           |
              %3C%3D
            example: event==disconnect%20AND%20coloName!=SFO
            type: string
        - in: query
          name: since
          schema:
            allOf:
              - description: >-
                  Start of time interval to query, defaults to `until` - 6
                  hours. Timestamp must be in RFC3339 format and uses UTC unless
                  otherwise specified.
              - example: '2014-01-01T05:20:00.12345Z'
                format: date-time
                type: string
                x-auditable: true
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - allOf:
                      - properties:
                          errors:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                documentation_url:
                                  type: string
                                message:
                                  type: string
                                source:
                                  properties:
                                    pointer:
                                      type: string
                                  type: object
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          messages:
                            example: []
                            items:
                              properties:
                                code:
                                  minimum: 1000
                                  type: integer
                                documentation_url:
                                  type: string
                                message:
                                  type: string
                                source:
                                  properties:
                                    pointer:
                                      type: string
                                  type: object
                              required:
                                - code
                                - message
                              type: object
                              uniqueItems: true
                            type: array
                          success:
                            description: Whether the API call was successful.
                            enum:
                              - true
                            example: true
                            type: boolean
                        required:
                          - success
                          - errors
                          - messages
                        type: object
                    type: object
                  - properties:
                      result:
                        properties:
                          data:
                            description: List of columns returned by the analytics query.
                            items:
                              properties:
                                dimensions:
                                  items:
                                    type: string
                                  type: array
                                metrics:
                                  oneOf:
                                    - items:
                                        type: number
                                      type: array
                                    - items:
                                        items:
                                          type: number
                                        type: array
                                      type: array
                              type: object
                            type: array
                          data_lag:
                            description: >-
                              Number of seconds between current time and last
                              processed event, i.e. how many seconds of data
                              could be missing.
                            example: 3
                            minimum: 0
                            type: number
                          max:
                            allOf:
                              - description: >-
                                  Maximum result for each selected metrics
                                  across all data.
                              - additionalProperties:
                                  type: number
                                example:
                                  bytesEgress: 100
                                  bytesIngress: 50
                                type: object
                          min:
                            allOf:
                              - description: >-
                                  Minimum result for each selected metrics
                                  across all data.
                              - additionalProperties:
                                  type: number
                                example:
                                  bytesEgress: 100
                                  bytesIngress: 50
                                type: object
                          query:
                            properties:
                              dimensions:
                                description: >-
                                  Can be used to break down the data by given
                                  attributes. Options are: 


                                  Dimension                 |
                                  Name                            | Example

                                  --------------------------|---------------------------------|--------------------------

                                  event                     | Connection
                                  Event                | connect, progress,
                                  disconnect, originError, clientFiltered

                                  appID                     | Application
                                  ID                  |
                                  40d67c87c6cd4b889a4fd57805225e85

                                  coloName                  | Colo
                                  Name                       | SFO

                                  ipVersion                 | IP version used by
                                  the client   | 4, 6.
                                example:
                                  - event
                                  - appID
                                items:
                                  enum:
                                    - event
                                    - appID
                                    - coloName
                                    - ipVersion
                                  type: string
                                type: array
                              filters:
                                description: >-
                                  Used to filter rows by one or more dimensions.
                                  Filters can be combined using OR and AND
                                  boolean logic. AND takes precedence over OR in
                                  all the expressions. The OR operator is
                                  defined using a comma (,) or OR keyword
                                  surrounded by whitespace. The AND operator is
                                  defined using a semicolon (;) or AND keyword
                                  surrounded by whitespace. Note that the
                                  semicolon is a reserved character in URLs
                                  (rfc1738) and needs to be percent-encoded as
                                  %3B. Comparison options are:


                                  Operator                  |
                                  Name                            | URL Encoded

                                  --------------------------|---------------------------------|--------------------------

                                  ==                        |
                                  Equals                          | %3D%3D

                                  !=                        | Does not
                                  equals                 | !%3D

                                  \>                        | Greater
                                  Than                    | %3E

                                  \<                        | Less
                                  Than                       | %3C

                                  \>=                       | Greater than or
                                  equal to        | %3E%3D

                                  \<=                       | Less than or equal
                                  to           | %3C%3D
                                example: event==disconnect%20AND%20coloName!=SFO
                                type: string
                              limit:
                                description: Limit number of returned metrics.
                                type: number
                              metrics:
                                description: >-
                                  One or more metrics to compute. Options are: 


                                  Metric                    |
                                  Name                                |
                                  Example                  | Unit

                                  --------------------------|-------------------------------------|--------------------------|--------------------------

                                  count                     | Count of total
                                  events               |
                                  1000                     | Count

                                  bytesIngress              | Sum of ingress
                                  bytes                |
                                  1000                     | Sum

                                  bytesEgress               | Sum of egress
                                  bytes                 |
                                  1000                     | Sum

                                  durationAvg               | Average connection
                                  duration         | 1.0                      |
                                  Time in milliseconds

                                  durationMedian            | Median connection
                                  duration          | 1.0                      |
                                  Time in milliseconds

                                  duration90th              | 90th percentile
                                  connection duration | 1.0                     
                                  | Time in milliseconds

                                  duration99th              | 99th percentile
                                  connection duration | 1.0                     
                                  | Time in milliseconds.
                                example:
                                  - count
                                  - bytesIngress
                                items:
                                  enum:
                                    - count
                                    - bytesIngress
                                    - bytesEgress
                                    - durationAvg
                                    - durationMedian
                                    - duration90th
                                    - duration99th
                                  type: string
                                type: array
                              since:
                                allOf:
                                  - description: >-
                                      Start of time interval to query, defaults
                                      to `until` - 6 hours. Timestamp must be in
                                      RFC3339 format and uses UTC unless
                                      otherwise specified.
                                  - example: '2014-01-01T05:20:00.12345Z'
                                    format: date-time
                                    type: string
                                    x-auditable: true
                              sort:
                                description: >-
                                  The sort order for the result set; sort fields
                                  must be included in `metrics` or `dimensions`.
                                example:
                                  - +count
                                  - '-bytesIngress'
                                items:
                                  type: string
                                type: array
                              until:
                                allOf:
                                  - description: >-
                                      End of time interval to query, defaults to
                                      current time. Timestamp must be in RFC3339
                                      format and uses UTC unless otherwise
                                      specified.
                                  - example: '2014-01-01T05:20:00.12345Z'
                                    format: date-time
                                    type: string
                                    x-auditable: true
                            type: object
                          rows:
                            description: Total number of rows in the result.
                            example: 5
                            minimum: 0
                            type: number
                          time_intervals:
                            description: 'List of time interval buckets: [start, end]'
                            items:
                              items:
                                example: '2014-01-01T05:20:00.12345Z'
                                format: date-time
                                type: string
                                x-auditable: true
                              type: array
                            type: array
                          totals:
                            allOf:
                              - description: >-
                                  Total result for each selected metrics across
                                  all data.
                              - additionalProperties:
                                  type: number
                                example:
                                  bytesEgress: 100
                                  bytesIngress: 50
                                type: object
                        required:
                          - rows
                          - data
                          - data_lag
                          - min
                          - max
                          - totals
                          - query
                        type: object
          description: Get analytics summary response
        4xx:
          content:
            application/json:
              schema:
                properties:
                  errors:
                    allOf:
                      - example: []
                        items:
                          properties:
                            code:
                              minimum: 1000
                              type: integer
                            documentation_url:
                              type: string
                            message:
                              type: string
                            source:
                              properties:
                                pointer:
                                  type: string
                              type: object
                          required:
                            - code
                            - message
                          type: object
                          uniqueItems: true
                        type: array
                    example:
                      - code: 7003
                        message: No route for the URI
                    minLength: 1
                  messages:
                    allOf:
                      - example: []
                        items:
                          properties:
                            code:
                              minimum: 1000
                              type: integer
                            documentation_url:
                              type: string
                            message:
                              type: string
                            source:
                              properties:
                                pointer:
                                  type: string
                              type: object
                          required:
                            - code
                            - message
                          type: object
                          uniqueItems: true
                        type: array
                    example: []
                  result:
                    enum:
                      - null
                    nullable: true
                    type: object
                  success:
                    description: Whether the API call was successful.
                    enum:
                      - false
                    example: false
                    type: boolean
                required:
                  - success
                  - errors
                  - messages
                  - result
                type: object
          description: Get analytics summary response failure
      security:
        - api_token: []
        - api_email: []
          api_key: []
      summary: Get analytics summary
      tags:
        - Spectrum Analytics
      x-api-token-group:
        - Analytics Read
